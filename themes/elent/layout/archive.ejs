<div class="container archive-container">
  <div class="timeline-header">
    <span class="timeline-total-count">文章总览 - <%= site.posts.length %></span>
  </div>

  <div class="archive-timeline">
    <% var lastYear; %>
    <% page.posts.forEach(function(post, index){ %>
      <% var currentYear = date(post.date, 'YYYY'); %>
      
      <% if (currentYear !== lastYear) { %>
        <% lastYear = currentYear; %>
        <div class="timeline-year">
          <span class="year-num"><%= currentYear %></span>
        </div>
      <% } %>

      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-date">
            <i class="iconfont icon-calendar"></i> <%= date(post.date, 'YYYY-MM-DD') %>
          </div>
          <a href="<%- url_for(post.path) %>" class="timeline-title"><%= post.title %></a>
          <% if(post.cover) { %>
            <a href="<%- url_for(post.path) %>" class="timeline-thumbnail">
              <img src="<%- url_for(post.cover) %>" alt="<%= post.title %>">
            </a>
          <% } %>
        </div>
      </div>
    <% }) %>
  </div>

    <% if (page.total > 1){ %>
    <nav class="pagination">
      <%- paginator({
        prev_text: '&laquo; Prev',
        next_text: 'Next &raquo;'
      }) %>
    </nav>
  <% } %>
</div>
